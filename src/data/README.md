# Demo Data Structure

This directory contains pre-computed demo data for the EASE app.

## Files

### `demoUserAlex.json`

Generated by `ALINE/scripts/create_demo_dataset.py` (Ticket 013).

**Structure:**
```json
{
  "user": {
    "user_id": "demo_alex",
    "name": "Alex",
    "email": "alex.demo@ease.app",
    "start_date": "2025-10-16",
    "profile": { ... }
  },
  "predictions": [
    {
      "day": 0,
      "date": "2025-10-16T00:00:00",
      "daily_risk": {
        "mean": 0.148,
        "lower": 0.076,
        "upper": 0.237
      },
      "hourly_risks": [ ... ],
      "latents": {
        "stress": 0.005,
        "sleep_debt": 0.014,
        "hormonal": 0.005,
        "environmental": -0.009
      },
      "has_migraine": false
    },
    ...
  ],
  "correlations": [ ... ],
  "calendar": [ ... ]
}
```

**Stats:**
- 30 days of predictions (Oct 16 - Nov 14, 2025)
- 720 hourly predictions (30 days Ã— 24 hours)
- 6 migraine events
- 4 correlation insights
- Average risk: 15.1%
- File size: 131 KB

## Usage

### TypeScript

```typescript
import { demoDataService } from '../services/demoDataService';
import { useRiskPrediction } from '../hooks/useDemoData';

// Get current risk
const { risk, lower, upper } = demoDataService.getCurrentRisk();

// In React component
function MyComponent() {
  const { loading, risk, bounds } = useRiskPrediction();
  
  if (loading) return <div>Loading...</div>;
  
  return <div>Risk: {(risk * 100).toFixed(0)}%</div>;
}
```

### Direct Import

```typescript
import demoData from '../data/demoUserAlex.json';

console.log(demoData.user.name); // "Alex"
console.log(demoData.predictions.length); // 30
```

## Data Service API

See `src/services/demoDataService.ts` for full API:

- `getCurrentRisk()` - Get latest risk prediction
- `getPredictionByDate(date)` - Get prediction for specific date
- `getHourlyRisk(date)` - Get 24-hour risk curve
- `getCalendarMonth(year, month)` - Get calendar data
- `getCorrelations()` - Get correlation insights
- `addTimelineEntry(date, type, data)` - Add user activity
- `resetDemo()` - Clear all localStorage data

## Regenerating Data

To regenerate the demo dataset:

```bash
cd ALINE
python scripts/create_demo_dataset.py
```

This will:
1. Generate 30 days of realistic features
2. Run ALINE model inference
3. Compute correlations
4. Output to `src/data/demoUserAlex.json`

## Notes

- All dates are in ISO 8601 format
- Risk values are probabilities (0-1)
- Latents are normalized (-1 to +1)
- Timeline persists to localStorage as `ease_user_timeline`
