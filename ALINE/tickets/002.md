

### ğŸ§  `002_docker_jupyter_env.md`

# ğŸ§  Ticket 002 â€“ Containerized Jupyter + ML Environment

**Date:** 2025-11-15
**Owner:** Infra / Backend
**Status:** âœ… Complete
**Goal:** Build a reproducible Dockerized ML environment with GPU acceleration and pre-installed dependencies for ALINE simulation, Bayesian inference, and visualization.

---

## ğŸ¯ Objective

Create a standardized runtime so every team member can run:

* Jupyter notebooks for ALINE development.
* Synthetic migraine simulator and inference training.
* Bayesian sampling and PyTorch models with CUDA support.

This isolates dependencies and ensures parity across developer machines and CI.

---

## ğŸ“‚ Inputs

| File                 | Description                  |
| -------------------- | ---------------------------- |
| `Dockerfile`         | Base image definition        |
| `docker-compose.yml` | Service orchestration        |
| `requirements.txt`   | Optional pinned versions     |
| `/workspace`         | Mounted local project folder |

---

## ğŸ§© Tasks

### 1. Define the Base Image

```dockerfile
FROM pytorch/pytorch:2.3.0-cuda12.1-cudnn8-runtime

# Install base libs for ALINE + Bayesian simulation
RUN pip install --no-cache-dir \
    jupyterlab numpy pandas scipy scikit-learn matplotlib seaborn \
    torch torchvision torchaudio tqdm einops wandb pyyaml \
    statsmodels pymc pytensor

WORKDIR /workspace
EXPOSE 8888
CMD ["jupyter", "lab", "--ip=0.0.0.0", "--allow-root", "--no-browser"]
```

---

### 2. Add Docker Compose (Optional GPU Runtime)

```yaml
version: "3.8"
services:
  jupyter:
    build: .
    ports:
      - "8888:8888"
    volumes:
      - ./workspace:/workspace
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]
```

---

### 3. Verify Launch

```bash
docker compose build
docker compose up
```

Access via browser: `http://localhost:8888`
GPU availability check inside notebook:

```python
import torch; print(torch.cuda.is_available())
```

---

## ğŸ§  Integration with ALINE

Used by:

* **Ticket 001:** mock distribution generator.
* **Ticket 003:** feature normalization and priors testing.
* **Ticket 004+:** migraine simulator, model training, policy optimization.

---

## âœ… Deliverables

* [x] Working JupyterLab container (CUDA optional).
* [x] Pinned dependency list (`requirements.txt`).
* [x] Updated `README.md` with run instructions.
* [x] Verified notebook execution under `/workspace/notebooks`.

---

> *â€œBuild the lab before the experiment.â€*

---