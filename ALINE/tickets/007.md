### ğŸ¯ `007_active_query_policy_simplified.md`

# ğŸ¯ Ticket 007 â€“ Simplified Active Query Policy (Top-k Hour Selection)

**Date:** 2025-11-15
**Owner:** ML / Modelling
**Status:** ğŸ”§ To Do
**Goal:** Implement a practical policy that selects **k hourly slots** for targeted sensing/prompts, based on uncertainty and impact.

---

## ğŸ¯ Objective

No full RL. Use a **priority score** per hour:
`score_t = Î»1 * entropy(p_t) + Î»2 * mean(sigma_z_t) + Î»3 * |âˆ‚p/âˆ‚Z_t|`.

---

## ğŸ“‚ Inputs

| File                  | Description            |
| --------------------- | ---------------------- |
| `models/aline.py`     | Policy head scores     |
| `configs/policy.yaml` | Î» weights, k (e.g., 3) |

---

## ğŸ§© Tasks

1. Add `policy_utils.py` to compute priority scores from posterior.
2. Implement `select_topk_hours(scores, k) -> idx`.
3. Unit tests on deterministic cases.

---

## ğŸ§  Integration

* Used online in FastAPI to propose â€œnext best hoursâ€ to sample or prompt.
* Scores also drive visualization in daily risk plots (Ticket 008).

---

## âœ… Deliverables

* [ ] `models/policy_utils.py`
* [ ] `configs/policy.yaml`
* [ ] `tests/test_policy.py`

---

> *â€œPick the next question where the answer matters most.â€*

---
